# AI智能课堂笔记 - 定制与打包指南

## 📁 文件结构说明

```
desktop-client/
├── main.js         ← 主程序（启动界面、窗口逻辑）
├── config.json     ← 运行配置（服务器地址、应用名称）
├── package.json    ← 打包配置（安装包名称、图标、快捷方式）
└── app.ico         ← 应用图标
```

---

## 1️⃣ 修改软件名称

需要改 **3 个地方**，缺一不可：

| 文件 | 字段 | 作用 |
|------|------|------|
| `config.json` | `"appName"` | 窗口标题栏、启动界面、托盘显示的名称 |
| `package.json` | `"productName"` | exe 文件名、安装程序标题 |
| `package.json` | `"build.nsis.shortcutName"` | 桌面快捷方式和开始菜单的名称 |

示例：把名称改为"我的学习助手"

```json
// config.json
{ "appName": "我的学习助手" }

// package.json
{ "productName": "我的学习助手",
  "build": { "nsis": { "shortcutName": "我的学习助手" } } }
```

---

## 2️⃣ 修改图标

1. 准备一个 `.ico` 格式的图标文件（建议 256×256 像素）
2. 把它命名为 `app.ico`，放到 `desktop-client/` 目录下替换原文件
3. 重新打包即可

> 💡 可以用在线工具把 PNG 转成 ICO：https://convertio.co/png-ico/

---

## 3️⃣ 修改启动界面

打开 `main.js`，搜索 `getSplashHTML` 函数，可以修改：

- **Logo**：找到 `\uD83D\uDCDA`（📚），替换成其他 emoji
- **副标题**：找到 `智能学习 · 高效笔记`，改成你想要的文字
- **背景色**：找到 `background:linear-gradient(135deg,#0f0f1a...`，修改颜色值
- **提示文字**：在 `app.whenReady()` 中搜索 `正在启动服务...` 等文字

---

## 4️⃣ 修改服务器地址

编辑 `config.json`：
```json
{
  "server": "http://your-server.com:3000",
  "appName": "AI智能课堂笔记"
}
```

- `localhost` → 本地模式（自动启动后端）
- 其他地址 → 远程模式（直接连接，不启动后端）

---

## 5️⃣ 重新打包步骤

每次修改后，在项目根目录执行：

```powershell
# 构建前端
cd frontend
npm install
npx vite build
cd ..

# 安装后端依赖
cd backend
npm install --production
cd ..

# 打包
cd desktop-client
npm install
npm run build
```

安装包生成在 `release/` 目录下。

---

## 6️⃣ 常见问题

**Q: 改了名字但安装后还是旧名字？**
A: 先卸载旧版本，再安装新版。或者改一下 `package.json` 里的 `"version"` 版本号。

**Q: 图标没变？**
A: 确保 `app.ico` 是真正的 ICO 格式（不是改了扩展名的 PNG）。Windows 有图标缓存，可以重启电脑后再看。

**Q: 安装包太大？**
A: 因为打包了整个 backend（含 node_modules）。这是正常的，Electron 应用通常在 80-200MB。
